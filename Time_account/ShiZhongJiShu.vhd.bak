LIBRARY IEEE;
USE IEEE.STD_LOGIC_1164.ALL;
USE IEEE.STD_LOGIC_UNSIGNED.ALL;

ENTITY SHIZHONGJISHU IS
PORT(clk_1:IN STD_LOGIC;
     SET:IN INTEGER 0 TO 3;
	  START:IN STD_LOGIC;
	  UP,DOWN:IN STD_LOGIC;
     H1,H2,M1,M2,S1,S2:OUT INTEGER RANGE 0 TO 9;
	  PROCESS_END:OUT STD_LOGIC);
END ENTITY SHIZHONGJISHU;

ARCHITECTURE S OF SHIZHONGJISHU IS
BEGIN
SIGNAL START_TEMP:
p1:PROCESS(UP,DOWN,SET,START)
BEGIN
IF(SET'EVENT AND SET=3)
H1<=0;H2<=0;M1<=2;M2<=0;S1<=0;S2<=0;
END IF;
IF(SET=3 AND START='0')THEN
  IF(UP'EVENT AND UP=1)THEN 
    IF(M2=9)THEN 
	    M1=M1+1;
		 M2=0;
	 ELSE M2=M2+1;
	 END IF;
  ELSIF(DOWN'EVENT AND DOWN=1)THEN
    IF(M2=0)THEN
	    M1=M1-1;
		 M2=9;
	 ELSE M2=M2-1;
	 END IF;
  END IF;
END IF;
END PROCESS p1;

p2:PROCESS(clk_1,SET,START)
BEGIN
START_TEMP<=START;
IF(SET'EVENT AND SET=0)
H1<=0;H2<=1;M1<=3;M2<=0;S1<=0;S2<=0;
END IF;
IF(SET'EVENT AND SET=1)
H1<=0;H2<=1;M1<=0;M2<=5;S1<=0;S2<=0;
END IF;
IF(SET'EVENT AND SET=2)
H1<=0;H2<=0;M1<=3;M2<=5;S1<=0;S2<=0;
END IF;

IF(clk_1'EVENT AND clk_1=1 AND START=1)THEN
  IF(S2=0)THEN
  S2<=9;
   IF(S1=0)THEN
	S1<=5;
	  IF(M2=0)THEN 
	  M2<=9;
	    IF(M1=0)THEN
		 M1<=5;
		   IF(H2=0)THEN
			H1<=0;H2<=0;M1<=0;M2<=0;S1<=0;S2<=0;
			PROCESS_END<=1;
			ELSE H2=H2-1;
			END IF;
		 ELSE M1=M1-1;
		 END IF;
	  ELSE M2=M2-1;
	  END IF;
	ELSE S1=S1-1;
	END IF;
  ELSE S2=S2-1;
  END IF;
END IF;
END PROCESS p2;
END ARCHITECTURE S;			  
				  